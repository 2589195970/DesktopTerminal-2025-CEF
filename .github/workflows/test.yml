name: Quick Test

on:
  push:
    branches: [ master, main ]
  pull_request:
    branches: [ master, main ]
  workflow_dispatch:

jobs:
  quick-test:
    runs-on: ubuntu-latest
    name: Quick Project Test
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Test project structure
      run: |
        echo "🔍 Testing DesktopTerminal-CEF project structure..."
        
        # Check key files exist
        test -f CMakeLists.txt && echo "✓ CMakeLists.txt found" || exit 1
        test -f README.md && echo "✓ README.md found" || exit 1
        test -f src/main.cpp && echo "✓ main.cpp found" || exit 1
        
        # Check key directories
        test -d src/core && echo "✓ src/core/ found" || exit 1
        test -d src/cef && echo "✓ src/cef/ found" || exit 1
        test -d scripts && echo "✓ scripts/ found" || exit 1
        
        # Check build scripts
        test -f scripts/build.sh && echo "✓ build.sh found" || exit 1
        test -f scripts/build.bat && echo "✓ build.bat found" || exit 1
        
        echo "✅ All basic checks passed!"

    - name: Count source files
      run: |
        echo "📊 Project statistics:"
        echo "Source files: $(find src -name '*.cpp' -o -name '*.h' | wc -l)"
        echo "Header files: $(find src -name '*.h' | wc -l)"
        echo "CPP files: $(find src -name '*.cpp' | wc -l)"
        echo "CMake files: $(find . -name '*.cmake' -o -name 'CMakeLists.txt' | wc -l)"
        echo "Script files: $(find scripts -type f | wc -l)"

    - name: Basic CMake test
      run: |
        echo "🔧 Testing CMake configuration..."
        mkdir test-build
        cd test-build
        cmake .. -DCMAKE_BUILD_TYPE=Debug
        echo "✅ CMake configuration successful!"