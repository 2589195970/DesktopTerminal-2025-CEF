name: Quick Test

on:
  push:
    branches: [ master, main ]
  pull_request:
    branches: [ master, main ]
  workflow_dispatch:

jobs:
  quick-test:
    runs-on: ubuntu-latest
    name: Quick Project Test
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Test project structure
      run: |
        echo "ğŸ” Testing DesktopTerminal-CEF project structure..."
        
        # Check key files exist
        test -f CMakeLists.txt && echo "âœ“ CMakeLists.txt found" || exit 1
        test -f README.md && echo "âœ“ README.md found" || exit 1
        test -f src/main.cpp && echo "âœ“ main.cpp found" || exit 1
        
        # Check key directories
        test -d src/core && echo "âœ“ src/core/ found" || exit 1
        test -d src/cef && echo "âœ“ src/cef/ found" || exit 1
        test -d scripts && echo "âœ“ scripts/ found" || exit 1
        
        # Check build scripts
        test -f scripts/build.sh && echo "âœ“ build.sh found" || exit 1
        test -f scripts/build.bat && echo "âœ“ build.bat found" || exit 1
        
        echo "âœ… All basic checks passed!"

    - name: Count source files
      run: |
        echo "ğŸ“Š Project statistics:"
        echo "Source files: $(find src -name '*.cpp' -o -name '*.h' | wc -l)"
        echo "Header files: $(find src -name '*.h' | wc -l)"
        echo "CPP files: $(find src -name '*.cpp' | wc -l)"
        echo "CMake files: $(find . -name '*.cmake' -o -name 'CMakeLists.txt' | wc -l)"
        echo "Script files: $(find scripts -type f | wc -l)"

    - name: Basic CMake test
      run: |
        echo "ğŸ”§ Testing CMake configuration..."
        mkdir test-build
        cd test-build
        cmake .. -DCMAKE_BUILD_TYPE=Debug
        echo "âœ… CMake configuration successful!"